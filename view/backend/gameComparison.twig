{% extends "comparison.twig" %}

{% block title %}
    <title>Modifications à valider | LISTaGAME</title>
{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-lg-6">

            <div class="background_game_image_comparison container-fluid" style="background-image: url('{{ HOST }}public/images/covers/cover_game_id_{{ game.getId }}.{{ game.getCover_extension }}')"></div>

            <h1>{{ game.getName }}</h1>

            <div><span class="bold">Développeur(s) :</span><br>
                {% for developer in developers %} 
                    <p>- {{ developer.getName }}</p>
                {% endfor %}
            </div>

            <div><span class="bold">Genre(s) :</span><br>
                {% for genre in genres %} 
                    <p>- {{ genre.getName }}</p>
                {% endfor %}
            </div>

            <div><span class="bold">Mode(s) de jeu :</span><br>
                {% for mode in modes %} 
                    <p>- {{ mode.getName }}</p>
                {% endfor %}
            </div>

            <div><span class="bold">Sortie(s) :</span><br>
                {% for release in releases %} 
                    <p>- Sur {{ release.getPlatform }}, édité par {{ release.getPublisher }} - {{ release.getRegion }} - {{  release. getReleaseDate }}</p>
                {% endfor %}
            </div>

            <div><span class="bold">Description :</span><br>
                <div>{{ game.getContent|raw }}</div>
            </div>
        </div>
        <div class="col-lg-6">

            {% if updatedCover %}

                <div class="background_game_image_comparison container-fluid" style="background-image: url('{{ HOST }}public/images/covers/temp/cover_game_id_{{ game.getId }}.{{ updatedGame.getCover_extension }}')"></div>

            {% else %}

                <div class="background_game_image_comparison container-fluid noImage d-flex justify-content-center align-items-center">Aucune modification d'image.</div>

            {% endif %}

            <h1 {% if  game.getName != updatedGame.getName %} class="redBackground" {% endif %}>
                {{ updatedGame.getName }}   
            </h1>

            <div><span class="bold">Développeur(s) :</span><br>
                {% for updatedDeveloper in updatedDevelopers %} 
                    {% for developer in developers %}
                        <p {% if updatedDeveloper.getName != developer.getName %} class="redBackground" {% endif %}>
                            - {{ updatedDeveloper.getName }}
                        </p>
                    {% endfor %}
                {% endfor %}
            </div>

            <div><span class="bold">Genre(s) :</span><br>
                {% for updatedGenre in updatedGenres %} 
                    {% for genre in genres %}
                        <p {% if updatedGenre.getName != genre.getName %} class="redBackground" {% endif %}>
                            - {{ updatedGenre.getName }}
                        </p>
                    {% endfor %}
                {% endfor %}
            </div>

            <div><span class="bold">Mode(s) de jeu :</span><br>
                {% for updatedMode in updatedModes %} 
                    {% for mode in modes %}
                        <p {% if updatedMode.getName != mode.getName %} class="redBackground" {% endif %}>
                            - {{ updatedMode.getName }}
                        </p>
                    {% endfor %}
                {% endfor %}
            </div>

            <div><span class="bold">Sortie(s) :</span><br>
                {% for updatedRelease in updatedReleases %} 
                    {% for release in releases %}
                        <p {% if (updatedRelease.getPlatform != release.getPlatform)
                              or (updatedRelease.getPublisher != release.getPublisher)
                              or (updatedRelease.getRegion != release.getRegion)
                              or (updatedRelease.getReleaseDate != release.getReleaseDate) 
                            %} 
                                class="redBackground" 
                            {% endif %}>
                            - Sur {{ updatedRelease.getPlatform }}, édité par {{ updatedRelease.getPublisher }} - {{ updatedRelease.getRegion }} - {{  updatedRelease. getReleaseDate }}
                        </p>
                    {% endfor %}
                {% endfor %}
            </div>

            <div><span class="bold">Description :</span><br>
                <div {% if  game.getContent != updatedGame.getContent %} class="redBackground" {% endif %}>
                    {{ updatedGame.getContent|raw }}
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="container">
        <div class="row">
            <div class="col d-flex justify-content-center">
                <a href="{{ HOST }}validate-update-by-member/id/{{ game.getId }}" class="mr-3">
                    <button type="button" class="btn btn-primary">Accepter les modifications</button>
                </a>
                <a href="#" data-url-delete-updated-game="{{ HOST }}delete-update-by-member/id/{{ game.getId }}" id="gameDeleteBtn" data-updated-game-name="{{ game.getName }}" data-toggle="modal" data-target="#deleteModal">
                    <button type="button" class="btn btn-danger">Refuser les modifications</button>
                </a>
            </div>
        </div>
    </div>

{% endblock %}